(function(n,t){app.modals.LinkedAccountsModal=function(){function s(n){var i=window.location.pathname+window.location.hash;t.ajax({url:t.appPath+"Account/SwitchToLinkedAccount",data:JSON.stringify({targetUserId:n.id,targetTenantId:n.tenantId,targetUrl:i})})}function h(n){t.message.confirm("关联用户 "+n.username+" 将会被删除",function(i){i&&o.unlinkUser({userId:n.id,tenantId:n.tenantId}).done(function(){u();t.notify.success(app.localize("SuccessfullyUnlinked"))})})}function u(){r.ajax.reload(null)}var f,e=n("#LinkedAccountsTable"),o=t.services.app.userLink,i,r;this.init=function(n){f=n};i=new app.ModalManager({viewUrl:t.appPath+"APP/Profile/LinkAccountModal",scriptUrl:t.appPath+"view-resources/Areas/App/Views/Profile/_LinkAccountModal.js",modalClass:"LinkAccountModal"});n("#LinkNewAccountButton").click(function(){i.open({},function(){u()})});r=e.WIMIDataTable({ajax:{url:t.appAPIPath+"userLink/listLinkedUserInfos",type:"POST",data:function(){}},columns:[{defaultContent:"",title:"操作",orderable:!1,width:"60px",className:"text-center not-mobile",createdCell:function(t,i,r){n('<button class="btn btn-xs btn-primary blue"><i class="icon-login"><\/i>'+app.localize("LogIn")+"<\/button>").appendTo(n(t)).click(function(){s(r)})}},{data:"username",title:"用户名"},{defaultContent:"",title:"移除",orderable:!1,width:"60px",className:"text-center not-mobile",createdCell:function(t,i,r){n('<button class="btn btn-default  btn-xs" title="登录"><i class="fa fa-trash"><\/i><\/button>').appendTo(n(t)).click(function(){h(r)})}}]})}})(jQuery,abp);